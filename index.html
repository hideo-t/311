<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.11 ãƒ¡ãƒ¢ãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆï¼šCOLOR & VOICE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .scene {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }

        .scene.active {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scene 0: ã‚¿ã‚¤ãƒˆãƒ« */
        .title-screen {
            text-align: center;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 18px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .start-button {
            padding: 20px 60px;
            font-size: 24px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.2);
            border: 3px solid white;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-button:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        /* Scene 1: ã‚«ãƒ©ãƒ¼é¸æŠ */
        .instruction {
            font-size: 24px;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .color-grid {
            position: relative;
            width: 90vw;
            max-width: 500px;
            aspect-ratio: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 8px;
        }

        .color-block {
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }

        .color-block:active {
            transform: scale(0.95);
        }

        .color-block.yellow { background: #FFD700; }
        .color-block.green { background: #7FFF00; }
        .color-block.cyan { background: #00FFFF; }
        .color-block.purple { background: #DA70D6; }

        .cloud-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            box-shadow: 0 0 30px rgba(255,255,255,0.8);
        }

        /* Scene 2: æ³¢å½¢ãƒãƒƒãƒ */
        .game-area {
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .resonance-zone {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 150px;
            border: 4px dashed rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            z-index: 10;
        }

        .wave-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100vh;
        }

        .wave-icon {
            position: absolute;
            font-size: 64px;
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s ease;
        }

        .wave-icon:active {
            transform: scale(1.3);
        }

        .counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 28px;
            font-weight: bold;
            background: rgba(0,0,0,0.5);
            padding: 15px 30px;
            border-radius: 50px;
        }

        /* Scene 3: å‡ºæ¼”è€… */
        .artist-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .artist-card {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 16px;
            padding: 20px;
            min-width: 140px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: cardAppear 0.5s ease;
        }

        @keyframes cardAppear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .artist-card:active {
            transform: scale(1.05);
        }

        .artist-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .artist-comment {
            font-size: 14px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .artist-card.revealed .artist-comment {
            opacity: 1;
            max-height: 100px;
        }

        .next-button {
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            border: 3px solid white;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-button:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        /* Scene 4: ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ± */
        .event-container {
            background: rgba(0,0,0,0.5);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            text-align: center;
        }

        .event-emblem {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #00FFFF, #DA70D6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: bold;
            border: 4px solid white;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .event-details {
            text-align: left;
            margin: 20px 0;
        }

        .detail-item {
            padding: 10px 0;
            font-size: 16px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .highlight {
            color: #FFD700;
            font-weight: bold;
            font-size: 18px;
        }

        /* Scene 5: çµæœ */
        .result-container {
            text-align: center;
            max-width: 400px;
        }

        .result-title {
            font-size: 36px;
            margin-bottom: 30px;
        }

        .color-display {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            border-radius: 50%;
            border: 4px solid white;
        }

        .color-name {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
        }

        .result-type {
            font-size: 24px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
        }

        .code-display {
            font-size: 20px;
            font-weight: bold;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border: 2px solid white;
            border-radius: 12px;
            margin: 20px 0;
            letter-spacing: 2px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .primary {
            background: rgba(255,255,255,0.3);
            border: 2px solid white;
            color: white;
        }

        .secondary {
            background: rgba(0,0,0,0.3);
            border: 2px solid white;
            color: white;
        }

        .modal-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- Scene 0: ã‚¿ã‚¤ãƒˆãƒ« -->
    <div class="scene active" id="scene0">
        <div class="title-screen">
            <h1>ğŸ¨ 3.11 ãƒ¡ãƒ¢ãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ</h1>
            <p class="subtitle">COLOR & VOICEï¼ˆ#9ï¼‰</p>
            <p class="subtitle">â€• è‰²ã¨å£°ã§ã€ã‚ã®æ—¥ã‚’ã¤ãªã â€•</p>
            <button class="start-button" onclick="goToScene(1)">START</button>
        </div>
    </div>

    <!-- Scene 1: ã‚«ãƒ©ãƒ¼é¸æŠ -->
    <div class="scene" id="scene1">
        <div class="instruction">ä»Šã®æ°—æŒã¡ã«è¿‘ã„è‰²ã‚’é¸ã‚“ã§ãã ã•ã„</div>
        <div class="color-grid">
            <div class="color-block yellow" onclick="selectColor('yellow')">ğŸŒŸ</div>
            <div class="color-block green" onclick="selectColor('green')">ğŸŒ¿</div>
            <div class="color-block cyan" onclick="selectColor('cyan')">ğŸ’§</div>
            <div class="color-block purple" onclick="selectColor('purple')">ğŸ¦‹</div>
            <div class="cloud-center"></div>
        </div>
    </div>

    <!-- Scene 2: æ³¢å½¢ãƒãƒƒãƒ -->
    <div class="scene" id="scene2">
        <div class="instruction">å…±é³´ã‚¾ãƒ¼ãƒ³ã§ã‚¿ãƒƒãƒ—ï¼</div>
        <div class="game-area">
            <div class="resonance-zone">å…±é³´ã‚¾ãƒ¼ãƒ³</div>
            <div class="wave-container" id="waveContainer"></div>
            <div class="counter" id="counter">0 / 5</div>
        </div>
    </div>

    <!-- Scene 3: å‡ºæ¼”è€… -->
    <div class="scene" id="scene3">
        <div class="instruction">å…±é³´ã—ãŸå£°ãŒè¦‹ãˆã¦ããŸâ€¦</div>
        <div class="artist-cards" id="artistCards"></div>
        <button class="next-button" onclick="goToScene(4)">æ¬¡ã¸ â†’</button>
    </div>

    <!-- Scene 4: ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ± -->
    <div class="scene" id="scene4">
        <div class="instruction">ã™ã¹ã¦ã®è‰²ã¨å£°ãŒ #9 ã¸â€¦</div>
        <div class="event-container">
            <div class="event-emblem">#9</div>
            <h2>EVENT SPACE Koriyama #9</h2>
            <div class="event-details">
                <div class="detail-item">ğŸ“… 3æœˆ8æ—¥ï¼ˆæ—¥ï¼‰</div>
                <div class="detail-item">ğŸ• é–‹å ´11:40 / é–‹æ¼”12:00</div>
                <div class="detail-item">ğŸ“ éƒ¡å±±å¸‚å¤§ç”º1-4-15ï¼ˆç¬¬2å¢—å­ãƒ“ãƒ«åœ°ä¸‹ï¼‰</div>
                <div class="detail-item">ğŸ“ 024-973-5242</div>
                <div class="detail-item highlight">âœ¨ å…¥å ´ç„¡æ–™ï¼ˆå…¨å¸­è‡ªç”±ï¼‰</div>
                <div class="detail-item">ğŸ¥¤ ãƒ‰ãƒªãƒ³ã‚¯ä»£ï¼šå¤§äºº400å††</div>
                <div class="detail-item">ğŸ æ¥å ´ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼šå…ˆç€150åï¼ˆé«˜æ ¡ç”Ÿä»¥ä¸‹ï¼‰</div>
            </div>
            <button class="next-button" onclick="goToScene(5)">FINISH</button>
        </div>
    </div>

    <!-- Scene 5: çµæœ -->
    <div class="scene" id="scene5">
        <div class="result-container">
            <div class="result-title">ğŸ‰ ã‚ãªãŸã®å…±é³´</div>
            <div class="color-display" id="colorDisplay"></div>
            <div class="color-name" id="colorName"></div>
            <div class="result-type" id="resultType"></div>
            <div class="code-display" id="codeDisplay"></div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="location.reload()">ã‚‚ã†ä¸€åº¦</button>
                <button class="modal-btn secondary" onclick="shareResult()">ã‚·ã‚§ã‚¢</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let selectedColor = null;
        let resonanceCount = 0;
        let waveIcons = [];
        let waveInterval = null;

        // è‰²ãƒ‡ãƒ¼ã‚¿
        const COLORS = {
            yellow: { hex: '#FFD700', name: 'YELLOW', type: 'HOPE RUNNER' },
            green: { hex: '#7FFF00', name: 'GREEN', type: 'HARMONY MAKER' },
            cyan: { hex: '#00FFFF', name: 'CYAN', type: 'MEMORY CARRIER' },
            purple: { hex: '#DA70D6', name: 'PURPLE', type: 'VOICE KEEPER' }
        };

        // å‡ºæ¼”è€…ãƒªã‚¹ãƒˆ
        const ARTISTS = [
            'ãƒ†ãƒ«G', 'é«˜æ©‹è¿·äºº', 'åŠ è—¤æ¼¢å¤ª', 'å²¡ç”°ç´”å­', 'æ©‹æœ¬å¦™å­',
            'æ¸…æ°´å…¼ä¸€', 'ä¼Šè—¤å’Œå“‰', 'ãƒãƒ’ãƒ­ã‚¹ã‚¿ãƒ¼ã‚ºãƒ•ãƒ©ãƒãƒ¼ãƒ ', 'å¤§æ§»ã„ãã‚’',
            'åŸç”°é›ªè¦‹', 'KUSANO', 'ã‚¢ãƒ™ãƒãƒ³ã‚»ã‚¤', 'ç›¸è‰¯è£•æˆ', '"~ing',
            'Lumiere', 'mone', 'å¤§ç£', 'èŠ¦åŸä¼šé¤¨',
            'ç¦å³¶ã‚¹ãƒãƒ¼ãƒ„ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼', 'STUDIO DANCE HEAD', 'ç©ºå…ˆæ‹“æµ·'
        ];

        // Sceneé·ç§»
        function goToScene(sceneNum) {
            console.log('Scene', sceneNum, 'ã¸é·ç§»');
            document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
            document.getElementById('scene' + sceneNum).classList.add('active');

            // Sceneåˆ¥åˆæœŸåŒ–
            if (sceneNum === 2) initScene2();
            if (sceneNum === 3) initScene3();
            if (sceneNum === 5) initScene5();
        }

        // è‰²é¸æŠ
        function selectColor(color) {
            console.log('è‰²é¸æŠ:', color);
            selectedColor = color;
            
            // èƒŒæ™¯è‰²å¤‰æ›´
            document.body.style.background = `linear-gradient(135deg, ${COLORS[color].hex}44, #764ba2)`;
            
            setTimeout(() => goToScene(2), 500);
        }

        // Scene 2: æ³¢å½¢ãƒãƒƒãƒåˆæœŸåŒ–
        function initScene2() {
            resonanceCount = 0;
            document.getElementById('counter').textContent = '0 / 5';
            
            // æ³¢å½¢ç”Ÿæˆé–‹å§‹
            waveInterval = setInterval(() => {
                if (resonanceCount >= 5) {
                    clearInterval(waveInterval);
                    setTimeout(() => goToScene(3), 1000);
                    return;
                }
                createWave();
            }, 2500);
        }

        // æ³¢å½¢ç”Ÿæˆ
        function createWave() {
            const container = document.getElementById('waveContainer');
            const icon = document.createElement('div');
            icon.className = 'wave-icon';
            icon.textContent = ['ğŸ¤', 'ğŸ’ƒ', 'ğŸ¸', 'ğŸ‘¦'][Math.floor(Math.random() * 4)];
            icon.style.left = (Math.random() * 70 + 15) + '%';
            icon.style.bottom = '-80px';
            
            let y = -80;
            const speed = 0.8;
            let clicked = false;
            
            container.appendChild(icon);
            
            // ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆ
            icon.onclick = function() {
                if (clicked) return;
                
                const zoneTop = window.innerHeight * 0.35;
                const zoneBottom = zoneTop + 150;
                const iconTop = window.innerHeight - y - 80;
                
                if (iconTop >= zoneTop && iconTop <= zoneBottom) {
                    clicked = true;
                    icon.style.opacity = '0';
                    resonanceCount++;
                    document.getElementById('counter').textContent = resonanceCount + ' / 5';
                    
                    setTimeout(() => icon.remove(), 300);
                }
            };
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            function animate() {
                if (clicked || !document.getElementById('scene2').classList.contains('active')) {
                    icon.remove();
                    return;
                }
                
                y += speed;
                icon.style.bottom = y + 'px';
                
                if (y > window.innerHeight + 80) {
                    icon.remove();
                    return;
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // Scene 3: å‡ºæ¼”è€…åˆæœŸåŒ–
        function initScene3() {
            const container = document.getElementById('artistCards');
            container.innerHTML = '';
            
            const shuffled = [...ARTISTS].sort(() => Math.random() - 0.5);
            const selected = shuffled.slice(0, 5);
            
            selected.forEach((name, i) => {
                setTimeout(() => {
                    const card = document.createElement('div');
                    card.className = 'artist-card';
                    card.innerHTML = `
                        <div class="artist-name">${name}</div>
                        <div class="artist-comment">ä»Šæ—¥ã®éŸ³ã®è‰²ï¼š${COLORS[selectedColor].name}</div>
                    `;
                    card.onclick = function() {
                        this.classList.toggle('revealed');
                    };
                    container.appendChild(card);
                }, i * 300);
            });
        }

        // Scene 5: çµæœåˆæœŸåŒ–
        function initScene5() {
            const colorData = COLORS[selectedColor];
            
            document.getElementById('colorDisplay').style.background = colorData.hex;
            document.getElementById('colorName').textContent = colorData.name;
            document.getElementById('resultType').textContent = colorData.type;
            
            const random = Math.floor(Math.random() * 100).toString().padStart(2, '0');
            document.getElementById('codeDisplay').textContent = 
                `311-KORIYAMA-${colorData.name}-${random}`;
        }

        // ã‚·ã‚§ã‚¢
        function shareResult() {
            const colorData = COLORS[selectedColor];
            const code = document.getElementById('codeDisplay').textContent;
            const text = `3.11ãƒ¡ãƒ¢ãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ\nç§ã®è‰²ï¼š${colorData.name}\nTYPEï¼š${colorData.type}\nåˆè¨€è‘‰ï¼š${code}\n3æœˆ8æ—¥(æ—¥) Koriyama #9`;
            
            if (navigator.share) {
                navigator.share({ text: text });
            } else {
                alert('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\n\n' + text);
                navigator.clipboard.writeText(text);
            }
        }

        console.log('ğŸ¨ ã‚²ãƒ¼ãƒ èµ·å‹•');
    </script>
</body>
</html>
